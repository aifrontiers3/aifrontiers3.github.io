<!-- page--><!DOCTYPE html><html prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>How to Build a Household Robot: Pieter Abbeel’s Story · AI Frontiers Conference</title><meta name="description" content="How to Build a Household Robot: Pieter Abbeel’s Story - Impact Deep LLC"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/vendor/slickNav/slicknav.css"><link rel="stylesheet" href="/vendor/slick/slick.css"><link rel="stylesheet" href="/vendor/jquery-modal/jquery.modal.css" type="text/css" media="screen"><link rel="stylesheet" href="/css/main.css?v=6.2"><script type="text/javascript" src="/vendor/jquery/jquery.min.js"></script></head><body class="post"><div class="wrap"><header id="header"><div class="logo-group"><a class="logo-link" href="/"><img src="/images/logo-horizontal.png" alt="AI Frontiers conference | AI Conference"></a><span class="conf-date">November 9-11, 2018</span></div><div class="header-right"><div class="navigation"><ul class="nav nav-main nav-list"><li class="nav-list-item"><a class="nav-list-link" href="/#topics" target="_self">Topics</a></li><li class="nav-list-item"><a class="nav-list-link" href="/#speakers" target="_self">Speakers</a></li><li class="nav-list-item"><a class="nav-list-link" href="/#schedule" target="_self">Schedule</a></li><li class="nav-list-item"><a class="nav-list-link" href="/blog" target="_self">Blog</a></li><li class="nav-list-item"><a class="nav-list-link" href="/#spnrs" target="_self">Sponsors</a></li><li class="nav-list-item"><a class="nav-list-link" href="/jobs" target="_self">Jobs</a></li><li class="nav-list-item"><a class="nav-list-link" href="/#venue" target="_self">Hotel</a></li><li class="nav-list-item"><a class="nav-list-link" href="/#venue" target="_self">Venue</a></li></ul><ul class="nav nav-sub nav-list"><li class="nav-list-item"><a class="nav-list-link" href="/past-conferences" target="_self">Past Conferences</a></li><li class="nav-list-item"><a class="nav-list-link" href="/startup-demo" target="_self">Startups</a></li><li class="nav-list-item"><a class="nav-list-link" href="/about" target="_self"><span style='color: #BABBC2'>About</span></a></li><li class="nav-list-item"><a class="nav-list-link" href="/#contact" target="_self"><span style='color: #BABBC2'>Contact</span></a></li></ul><ul class="nav nav-mobile nav-list" style="display:none;"><div class="main-items"><li class="nav-list-item main-nav-list-item"><a class="nav-list-link" href="/#topics" target="_self">Topics</a></li><li class="nav-list-item main-nav-list-item"><a class="nav-list-link" href="/#speakers" target="_self">Speakers</a></li><li class="nav-list-item main-nav-list-item"><a class="nav-list-link" href="/#schedule" target="_self">Schedule</a></li><li class="nav-list-item main-nav-list-item"><a class="nav-list-link" href="/blog" target="_self">Blog</a></li><li class="nav-list-item main-nav-list-item"><a class="nav-list-link" href="/#spnrs" target="_self">Sponsors</a></li><li class="nav-list-item main-nav-list-item"><a class="nav-list-link" href="/jobs" target="_self">Jobs</a></li><li class="nav-list-item main-nav-list-item"><a class="nav-list-link" href="/#venue" target="_self">Hotel</a></li><li class="nav-list-item main-nav-list-item"><a class="nav-list-link" href="/#venue" target="_self">Venue</a></li></div><div class="sub-items"><li class="nav-list-item sub-nav-list-item"><a class="nav-list-link" href="/past-conferences" target="_self">Past Conferences</a></li><li class="nav-list-item sub-nav-list-item"><a class="nav-list-link" href="/startup-demo" target="_self">Startups</a></li><li class="nav-list-item sub-nav-list-item"><a class="nav-list-link" href="/about" target="_self"><span style='color: #BABBC2'>About</span></a></li><li class="nav-list-item sub-nav-list-item"><a class="nav-list-link" href="/#contact" target="_self"><span style='color: #BABBC2'>Contact</span></a></li></div></ul></div><div class="social-bar"><a href="https://www.facebook.com/aifrontiersconference/" alt="facebook"><img class="social-icons" src="/images/socials/facebook.svg"></a><a href="https://twitter.com/AI_Frontiers" alt="Twitter"><img class="social-icons" src="/images/socials/twitter.svg"></a><a href="https://www.linkedin.com/company/17898981" alt="LinkedIn"><img class="social-icons" src="/images/socials/linkedin.svg"></a><a href="https://www.youtube.com/channel/UCdWI86GsaU1Bp1kRkm1UQ1Q" alt="Youtube"><img class="social-icons" src="/images/socials/youtube.svg"></a></div><a class="button button-effects buy-tickets" href="/register/">Register</a><!-- if type != 'tickets'--><!--     a.button.button-effects.buy-tickets(href="/tickets/")--><!--         != general["header-register-button-text"]--><!-- else--><!--     a.button.button-effects.buy-tickets(href="/register/")--><!--         != general["header-register-button-text"]--></div></header><main class="container"><article class="post"><article class="post-block"><div class="post-info">Aug 15, 2018</div><h1 class="post-title">How to Build a Household Robot: Pieter Abbeel’s Story</h1><div class="post-feature"><img src="/images/posts/Pieter-Abbeel.jpg"></div><div class="post-content"><p>Pieter Abbeel is on a quest. He wants to make a robot that can cook, clean up the room, make the bed, take out the trash, and fold the laundry.</p>
<p>The UC Berkey Professor started this quest since he was a graduate student in Andrew Ng’s group at Stanford University back in 2002. At that time, there was no robot for him to play with. He started with self-driving cars and helicopters.</p>
<a id="more"></a>
<p>In 2004, Abbeel published the paper <a href="https://ai.stanford.edu/~ang/papers/icml04-apprentice.pdf" target="_blank" rel="noopener">Apprenticeship Learning via Inverse Reinforcement Learning</a>. He proposed a new approach to train robots by observing an expert performing a task. He showed the feasibility of this approach in a simulation of self-driving cars. The paper is later regarded as one of his most important papers.</p>
<p>He then applied apprenticeship learning to helicopter control. Together with fellow student Adam Coates and his advisor Andrew Ng, <a href="https://www-cs.stanford.edu/people/ang/papers/acm09-ApprenticeshipLearningHelicopterControl.pdf" target="_blank" rel="noopener">Abbeel successfully trained a helicopter to perform an airshow without human supervision.</a></p>
<p>Abbeel became an Assistant Professor at UC Berkeley after receiving his Ph.D. in 2008. For the next 10 years until today, he has devoted himself fully to his true passion: Building a household robot .</p>
<p>A household robot should be versatile enough to do different chores. You don’t want to employ 5 different robots — one does cooking, one does laundry, one does dish washing, and so on . Even if your house is large enough for 5 specialized robots, you may want a robot to do other things: Picking up clothes on the floor, fetching a cup of coffee for you, opening the window, and so on.</p>
<p><img src="https://cdn-images-1.medium.com/max/1200/1*eWALcVisM2ppR4Doz5ub-A.jpeg" alt="img"></p>
<p>How do we build a general-purpose robot? Today’s robot can barely do one task well. It takes many hours of training for a robot to learn to move its arm in the right direction to pick up a cup.</p>
<p>Such difficulty does not prevent Abbeel from dreaming big. His first idea was using “imitation.” A person does a task, and the robot repeats it. This would save training time, and maybe allow the robot to do additional jobs.</p>
<p>In 2010, Abbeel created BRETT (for “Berkeley Robot for the Elimination of Tedious Tasks”), adapted from a Willow Garage PR2 robot that comes with cameras and grips. Following a set of rule-based instructions, BRETT became the first robot that can fold piles of towels. By doing this, Abbeel demonstrated that the hardware problem of a household robot can be solved.</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*3McusDccAOldpvUz2V82nw.jpeg" alt="img"></p>
<p>He then turned his attention to the software problem. How does a robot learn to do a task? How does a robot learn to do multiple jobs?</p>
<h3 id="Reinforcement-Learning"><a href="#Reinforcement-Learning" class="headerlink" title="Reinforcement Learning"></a>Reinforcement Learning</h3><p>Abbeel has been captivated by reinforcement learning (RL), which is a machine learning method that teaches an agent to do the right action through reward and punishment. This learning method assumes the agent interacts with its environment that gives the robot feedback for its actions. A simple example is pulling the arms of several slot machines. Different slot machines give you different payoffs. After a while, you learn to pull the arm that gives you the highest payoff. This is called the multi-armed bandit problem. A more complex example is playing a video game. By trying on different actions such as shooting and ducking, you get different scores and learn to play the game better.</p>
<p>Reinforcement learning is useful for training robots, as a robot needs to interact with the world by moving, grasping, folding, or doing other actions. If the robot receives the reward, it can do that action more often or more correctly.</p>
<p>Abbeel applies reinforcement learning in almost all his research. Take an example of BRETT. Its onboard camera can pinpoint the objects in front of it, as well as the position of its own arms and grips. Through trial and error, it learns to adjust its position of the hammer claw and maneuver the angle to the right place to pull out the nail.</p>
<h3 id="Deep-Reinforcement-Learning"><a href="#Deep-Reinforcement-Learning" class="headerlink" title="Deep Reinforcement Learning"></a>Deep Reinforcement Learning</h3><p>The drawback of reinforcement learning is that the environment is complex. To describe a task, a room, or a game, we have to enumerate all the positions, all different angles, and different situations. If we call each unique situation a state, the number of states will be in thousands or tens of thousands for a simple task.</p>
<p>How can the robot quickly summarize the current state and learn fast? The solution came from deep learning, which became popular after 2012 when it was shown to be effective in classifying images in the “cat” paper (presented in ICML 2012) and AlexNet paper (presented in NIPS 2012). Deep learning takes the raw image pixels and generalizes them to a few classes. Thus it frees us from manually identifying the important “features” in a picture or in the environment.</p>
<p>It is therefore natural to apply deep learning to a robot that interacts with its environment. Here deep learning is used to summarize the states. The robot can still use reinforcement learning to decide on the actions. Combining deep learning with reinforcement learning leads to the success of playing Atari game in 2013 and the Go game against human masters in 2016. The field of deep reinforcement learning was born.</p>
<p>Abbeel embraced deep reinforcement learning wholeheartedly. He was so enthusiastic about it that he gave a tutorial called <a href="https://people.eecs.berkeley.edu/~pabbeel/nips-tutorial-policy-optimization-Schulman-Abbeel.pdf" target="_blank" rel="noopener">Deep Reinforcement Learning through Policy Optimization</a> at NIPS 2016. It is still one of the most popular tutorials on deep reinforcement learning.</p>
<p>While deep reinforcement learning teaches a robot to do a task well, it does not generalize to multiple tasks. In other words, robots learn to do to a five-second action. But a five-second skill is something very different from a day-long skill, which is needed for a robot to roam in a house, performing different chores. This is where meta-learning is necessary.</p>
<h3 id="Meta-Learning-Generalize-learning-for-a-new-task"><a href="#Meta-Learning-Generalize-learning-for-a-new-task" class="headerlink" title="Meta-Learning: Generalize learning for a new task"></a>Meta-Learning: Generalize learning for a new task</h3><p>Meta-learning is learning from multiple tasks and applying the learning to a new task. It is also called “learning to learn”.</p>
<p>In NIPS 2017, Abbeel and fellow researchers at OpenAI and UC Berkeley presented the paper <a href="https://arxiv.org/abs/1709.04905" target="_blank" rel="noopener">One-Shot Visual Imitation Learning via Meta-Learning</a>, which combines meta-learning with one-shot learning (where the agent only get 1 example), With a meta-learner trained in multiple tasks, this system just needs to observe 1 demonstration, can then takes produces the right action for a new task.</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*pXm0sCogfk9lLxyzDrAekw.jpeg" alt="img"></p>
<p>Abbeel and his group further invented the<a href="https://arxiv.org/abs/1707.03141" target="_blank" rel="noopener"> Simple Neural Attentive Learner</a> (SNAIL) and presented it in ICLR 2018. This is a meta-learner implemented in 1 single deep neural network. This network combines sequence to sequence learning with soft attention, which allows the robot to remember the context of different tasks.</p>
<h3 id="Other-Research-Activities"><a href="#Other-Research-Activities" class="headerlink" title="Other Research Activities"></a>Other Research Activities</h3><p>Being a UC Berkeley Professor, Pieter Abbeel enjoys the privilege of getting talented and hardworking graduate students to work with him. Today he is supervising 25 Ph.D.s and postdocs, along with 25 undergraduate students. Like a general, Abbeel is leading his large troop to charge the hills of the robotics height. His troop fans out from different directions to scale the mountain. Here are the other researches his team is working on:</p>
<ol>
<li>Lifelong learning: A robot needs to continuously adapt to different tasks and different situations (generated by another learning agent). It’s applying meta-learning sequentially and generalize well. In experiments with two spider robot fighting again each other, they show that the continuously adaptive robot wins in the end. The most recent paper is written by Maruan Al-Shedivat of CMU, co-authored with people in OpenAI where Abbeel is affiliated.</li>
<li>Leverage simulation to train a robot.</li>
<li>Using past experience: This method is called Hindsight Experience Reply (HER). Instead of waiting until agent reaches the final goal to update the model once, we can propagate the reward back to all the actions in the past, and create a replay. In a replay, each intermediate reward is treated as a final reward. Thus we can update the learning function in each intermediate step (state) and learn faster. This reduces the data required for learning.</li>
</ol>
<p>Pieter Abbeel is on his way to his dream: Create a true household robot.</p>
<p>Maybe in the not-too-distant future, a robot at your home puts the dishes away and cooks meals for you. When you show your appreciation, the robot shakes his head and smiles, “No need to thank me. I am just an apprentice of Pieter Abbeel.”</p>
<!-- ![img](https://cdn-images-1.medium.com/max/1600/1*WSCslZfnAjKQMaLMBHWL-g.jpeg) -->
<p><img src="/images/posts/poster/speaker_poster_Pieter_Abbeel.jpg" alt="img"></p>
<p><strong>Pieter Abbeel</strong> will speak at AI Frontiers Conference’s Robot session on Nov 10, 2018 in San Jose, California. Join us at <a href="http://aifrontiers.com/">aifrontiers.com</a>.</p>
<p>AI Frontiers Conference brings together AI thought leaders to showcase cutting-edge research and products. This year, our speakers include: <strong>Ilya Sutskever</strong> (Founder of OpenAI), <strong>Jay Yagnik</strong> (VP of Google AI), <strong>Kai-Fu Lee</strong> (CEO of Sinovation), <strong>Mario Munich</strong> (SVP of iRobot), <strong>Quoc Le</strong> (Google Brian), <strong>Pieter Abbeel</strong> (Professor of UC Berkeley) and more. For media inquiry and ticket information, please contact us at: <a href="mailto:info@aifrontiers.com">info@aifrontiers.com</a></p>
</div></article></article></main><footer><!-- include mixins/paginator--><!-- +post()--></footer></div><script type="text/javascript" src="/vendor/jquery/jquery.min.js"></script><!-- mobile check--><script type="text/javascript">window.mobilecheck = function() {
  var check = false;
  (function(a){
      if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;
    })(navigator.userAgent||navigator.vendor||window.opera);
  return check;
};
</script><!-- Global Site Tag (gtag.js) - Google Analytics--><script async src="https://www.googletagmanager.com/gtag/js?id=UA-125089723-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments)};
gtag('js', new Date());
gtag('config', "UA-125089723-1");
var trackOutboundLink = (url) => {
  ga('send', 'event', 'outbound', 'click', url, {
      'transport': 'beacon',
      'hitCallback': () => {
        document.location = url;
    }
  });
};
</script><!-- script(type='text/javascript',src=url_for("vendor/jquery-modal/jquery.modal.js"))--><!-- script(type='text/javascript',src=url_for("vendor/slick/slick.min.js"))--><!-- SlickNav--><script type="text/javascript" src="/vendor/slickNav/jquery.slicknav.min.js"></script><script type="text/javascript">$(document).ready(function(){
    $('.nav-mobile').slicknav({
        label: "",
        appendTo: "#header"
    });
    //close menu on lost focus
    $('.slicknav_menu').focusout(function(event){
        $('.nav-mobile').slicknav('close'); //Here 'menu' is the id of ul.
    });
  });
</script><!-- vimeo--><script type="text/javascript" src="https://player.vimeo.com/api/player.js"></script><script type="text/javascript">if ($('body').hasClass('index')) {
    var bgPlayer = false;
    var fgPlayer = false;
    var fgPlayerOptions = {
       id: 227828879,
       autoplay: false,
       title: false,
       height: 500,
       loop: false
    };
    var bgPlayerOptions = {
       id: 227859594,
       autoplay: true,
       title: false,
       loop: true
    };
    if (window.mobilecheck()) {
       var fgPlayerOptions = {
           id: 227828879,
           autoplay: false,
           title: false,
           height: 220,
           loop: false
       };
    }
    else {
       if ($("#bgPlayer").length) {
          bgPlayer = new Vimeo.Player('bgPlayer', bgPlayerOptions);
          bgPlayer.setVolume(0);
          bgPlayer.ready().then(function() {
              bgPlayer.pause().then(bgPlayer.play());
          });
       }
    }
    // Watch video related scripts
    // $("#fgPlayer").on($.modal.BEFORE_OPEN, function(event, modal) {
    //    fgPlayer = new Vimeo.Player('fgPlayer', fgPlayerOptions);
    //    if (bgPlayer) bgPlayer.pause();
    // });
    // $("#fgPlayer").on($.modal.OPEN, function(event, modal) {
    //    if (!window.mobilecheck()) {if (fgPlayer) fgPlayer.play()};
    // });
    // $("#fgPlayer").on($.modal.BEFORE_CLOSE, function(event, modal) {
    //    if (bgPlayer) bgPlayer.play();
    // });
}
</script><script type="text/javascript">(function(){
    var s = document.getElementsByTagName("script")[0];
    var b = document.createElement("script");
    b.type = "text/javascript";b.async = true;
    b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
    s.parentNode.insertBefore(b, s);
})();
</script><!-- script(type="text/javascript").--><!--     if (window.mobilecheck()) {--><!--         $(".day-buttons").hide();--><!--         $(".schedule > .day").css("display", "block");--><!--     } else {--><!--         $($(".schedule .day-button")[0]).addClass("day-button--active");--><!--         $(".schedule .day-button").click(function(){--><!--             var idx = $(".schedule .day-button").index(this) % 3;--><!--             $(".schedule div.day").css("display", "none");--><!--             $(".schedule .day-button").removeClass("day-button--active");--><!--             $($(".schedule .day-button")[idx]).addClass("day-button--active");--><!--             $($(".schedule > .day")[idx]).css("display", "block");--><!--             if ($(this).hasClass("back-to-top")) {--><!--                 window.location.hash = "#schedule";--><!--                 window.location.href = "#schedule";--><!--             }--><!--         });--><!--     }--><script type="text/javascript">$(".module-speakers .speakers .speaker, .module-speakers .moderators .speaker, .module-speakers .past-speakers .speaker").click(function(e) {
    $(this).toggleClass("speaker--active");
});
$(".module-schedule .schedule .speaker").click(function(e) {
    var name = $(this).children(".name").text();
    var urlizedName = name.toLowerCase().split(' ').join('-');
    $("#" + urlizedName).click();
});
$(document).keyup(function(e) {
    if (e.which == 27) {
        $(".speaker--active").toggleClass("speaker--active");
    }
});
</script><!-- merge Facebook pixel tracking here, and since we have one noscript for LinkedIn already, we need to merge that--><script type="text/javascript">!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window,document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1579692765420749'); 
fbq('track', 'PageView');

</script><noscript><img height="1" width="1" style="display:none;" alt="" src="https://dc.ads.linkedin.com/collect/?pid=91636&amp;fmt=gif"><img height="1" width="1" src="https://www.facebook.com/tr?id=1579692765420749&amp;ev=PageView&amp;noscript=1"></noscript><script type="text/javascript">window.getDict = function() {
  var search = location.search.substring(1);
  return search?JSON.parse('{"' + search.replace(/&/g, '","').replace(/=/g,'":"') + '"}',
    function(key, value) { return key===""?value:decodeURIComponent(value) }):{}
}
</script><!-- Preserve URL parameter--><script type="text/javascript">function getUrlParams() {
    var params = [];
    if (window.location.href.indexOf('?') == -1) return [];

    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for (var i = 0; i < hashes.length; i++) {
        hash = hashes[i].split('=');
        params[hash[0]] = hash[1];
    }
    return params;
}

$( document ).ready(() => {
    var url_string = window.location.href;
    var params = getUrlParams();
    if (Object.keys(params).length != 0) {
        var paramsString = "?";
        var paramsArray = [];

        for (let field in params) {
            paramsArray.push(`${field}=${params[field]}`);
        }

        paramsString += paramsArray.join("&");

        for (var link of $('a')) {
            var $link = $(link);
            var href = $link.attr("href")
            if (href && href.substring(0, 4) != "tel:" && href.substring(0, 7) != "mailto:" && href.substring(0, 1) != "#") {
                var splits = href.split("#");
                if (splits.length == 1) {
                    $link.attr("href", splits[0] + paramsString);
                } else if (splits.length == 2) {
                    $link.attr("href", splits[0] + paramsString + "#" + splits[1]);
                }
            }
        }
    }
});
</script><!-- ========= Jumbotron Slider =========--><!-- script.--><!--     $(document).ready(function(){--><!--         $('.slider').slick({--><!--             autoplay: true,--><!--             autoplaySpeed: "#{general['slider-play-speed']}",--><!--             dots: true,--><!--             prevArrow: '<button type="button" class="slick-prev slick-arrow"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 41" enable-background="new 0 0 21 41"><polygon points="20.3,40.8 0,20.5 20.3,0.2 21,0.9 1.3,20.5 21,40.1 "></polygon></svg></button>',--><!--             nextArrow: '<button type="button" class="slick-next slick-arrow"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 41" enable-background="new 0 0 21 41"><polygon points="20.3,40.8 0,20.5 20.3,0.2 21,0.9 1.3,20.5 21,40.1 "></polygon></svg></button>'--><!--         });--><!--     });--><script type="text/javascript">(function ($) {
  $.fn.countdown = function(options){
    //global variables
    var vars = $.extend({}, $.fn.countdown.defaults, options),
        $counter = $(this),
        t = {days: 0, hours: 0, min: 0, sec: 0},
        // targetDate = new Date(vars.targetDate).getTime(),
        // secondsLeft;
        targetDate = new Date('nov 09, 2018').getTime(),
        secondsLeft;

    //private methods
    methods = {
      setup: function() {
        $.each(t, function(time, value){
          var currentSection = '<div class="segment"><div class="digits" id="'+time+'"><span>0</span><span>0</span></div><div class="label">'+time+'</div></div><span class="colon">:</div>';
          $counter.append(currentSection);
        });
      },
      updateTime: function(){
        var currentTime = new Date().getTime(),
            secondsLeft = (targetDate - currentTime) / 1000,
            secsIn = {days: 86400, hours: 3600, min: 60};
        if (secondsLeft < 0) {secondsLeft = 0;}
        $.each(t, function(timePeriod, value){
          t[timePeriod] = parseInt( (secondsLeft / secsIn[timePeriod]), 10);
          if (timePeriod !== 'sec'){
           secondsLeft = secondsLeft % secsIn[timePeriod];
          }
          else {
            t[timePeriod] = secondsLeft;
          }
        });
      },
      updateCounter: function() {
        $.each(t, function(period, value){
          var section = $counter.find('#'+period).children();
          digit = splitDigits(value);
          section.eq(0).html(digit[0]);
          section.eq(1).html(digit[1]);
        });
        function splitDigits(number) {
          var digits = [];
          digits[0] = Math.floor(number / 10);
          digits[1] = Math.floor(number % 10);
          return digits;
        }
      },
      tick: function () {
        if (secondsLeft < 1) {}
        else {
          methods.updateTime();
          methods.updateCounter();
          setTimeout(function() {methods.tick();}, 1000);
        }
      },

      init: function () {
        methods.setup();
        methods.updateTime();
        methods.updateCounter();
        methods.tick();
      },
    };

    //initiate countdown
    methods.init();
  };

  $.fn.countdown.defaults = {
    targetDate: 'nov 09 2018',
    labels: true
  };
}(jQuery));
// end of countdown plugin

// dom ready events (would usually be in separate js file)
$(document).ready(function() {
  // arbitrarially make a new date
  var newDate = new Date();
  newDate.setDate(45);
  $('.counter').countdown({targetDate: newDate});
});</script></body></html>